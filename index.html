<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Sabah TesbihatÄ±</title>
    <meta name="theme-color" content="#556b2f">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="apple-touch-icon" href="icons/icon-180.png">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.1/marked.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.8/dist/purify.min.js" defer></script>
    <script>
      window.__ENV__ = window.location.pathname.startsWith('/staging')
        ? 'staging'
        : 'prod';
    </script>
    <script src="firebase-config.js" defer></script>
    <script src="storage.js" defer></script>
    <script src="auth.js" defer></script>
    <script src="sync.js" defer></script>
    <script src="main.js" defer></script>
  </head>
  <body>
    <div class="app" data-theme="light">
      <header class="hero">
        <div class="hero__top">
          <h1 class="hero__title">Tesbihat</h1>
          <div class="hero__actions">
            <button class="icon-button text-decrease" aria-label="YazÄ± boyutunu kÃ¼Ã§Ã¼lt">
              <span aria-hidden="true">Aâˆ’</span>
            </button>
            <button class="icon-button text-increase" aria-label="YazÄ± boyutunu bÃ¼yÃ¼t">
              <span aria-hidden="true">A+</span>
            </button>
            <button class="icon-button theme-toggle" aria-label="TemayÄ± deÄŸiÅŸtir">
              <span class="theme-toggle__icon" aria-hidden="true">â˜€ï¸</span>
            </button>
            <button class="icon-button settings-toggle" aria-label="AyarlarÄ± aÃ§">
              <span aria-hidden="true">âš™ï¸</span>
            </button>
          </div>
        </div>
        <div class="hero__links" role="group" aria-label="HÄ±zlÄ± baÄŸlantÄ±lar">
          <button type="button" class="hero-link" data-hero-link="ucaylar" data-prayer="ucaylar">
            <span class="hero-link__icon" aria-hidden="true">ğŸŒ™</span>
            <span class="hero-link__label">ÃœÃ§ Aylar</span>
          </button>
          <button type="button" class="hero-link" data-hero-link="ortakdua" data-prayer="ortakdua">
            <span class="hero-link__icon" aria-hidden="true">ğŸ¤</span>
            <span class="hero-link__label">Ortak Dua</span>
          </button>
          <button type="button" class="hero-link" data-hero-link="cevsen" data-prayer="cevsen">
            <span class="hero-link__icon" aria-hidden="true">ğŸ“œ</span>
            <span class="hero-link__label">CevÅŸen</span>
          </button>
          <button type="button" class="hero-link" data-hero-link="zikirler" data-prayer="zikirler">
            <span class="hero-link__icon" aria-hidden="true">ğŸ“¿</span>
            <span class="hero-link__label">Zikirler</span>
          </button>
          <button type="button" class="hero-link" data-hero-link="dualar" data-prayer="dualar">
            <span class="hero-link__icon" aria-hidden="true">ğŸ¤²ğŸ¼</span>
            <span class="hero-link__label">Dualar</span>
          </button>
        </div>
        <div class="hero__tabs" role="tablist" aria-label="Tesbihat vakitleri">
          <button class="prayer-tab prayer-tab--home" type="button" role="tab" aria-selected="false" data-prayer="home" aria-label="Ana sayfa">
            <span class="prayer-tab__icon" aria-hidden="true">ğŸ </span>
            <span class="sr-only">Ana sayfa</span>
          </button>
          <button class="prayer-tab is-active" type="button" role="tab" aria-selected="true" data-prayer="sabah">
            <span class="prayer-tab__icon" aria-hidden="true">ğŸŒ…</span>
            <span class="prayer-tab__label">Sabah</span>
          </button>
          <button class="prayer-tab" type="button" role="tab" aria-selected="false" data-prayer="ogle">
            <span class="prayer-tab__icon" aria-hidden="true">â˜€ï¸</span>
            <span class="prayer-tab__label">Ã–ÄŸle</span>
          </button>
          <button class="prayer-tab" type="button" role="tab" aria-selected="false" data-prayer="ikindi">
            <span class="prayer-tab__icon" aria-hidden="true">ğŸŒ¤ï¸</span>
            <span class="prayer-tab__label">Ä°kindi</span>
          </button>
          <button class="prayer-tab" type="button" role="tab" aria-selected="false" data-prayer="aksam">
            <span class="prayer-tab__icon" aria-hidden="true">ğŸŒ‡</span>
            <span class="prayer-tab__label">AkÅŸam</span>
          </button>
          <button class="prayer-tab" type="button" role="tab" aria-selected="false" data-prayer="yatsi">
            <span class="prayer-tab__icon" aria-hidden="true">ğŸŒ™</span>
            <span class="prayer-tab__label">YatsÄ±</span>
          </button>
        </div>
      </header>
      <main class="main">
        <section id="content" class="content" aria-live="polite">
          <div class="loading">Ä°Ã§erik yÃ¼kleniyorâ€¦</div>
        </section>
      </main>
    </div>
    <div class="settings-overlay" data-settings hidden>
      <div class="settings-sheet card" role="dialog" aria-modal="true" aria-labelledby="settings-title" data-settings-main>
        <header class="settings-sheet__header">
          <h2 id="settings-title">Ayarlar</h2>
          <button type="button" class="settings-close" data-close-settings aria-label="AyarlarÄ± kapat">âœ•</button>
        </header>
        <p class="settings-sheet__intro">UygulamanÄ±n gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ ve dua takibini buradan yÃ¶netebilirsiniz.</p>
        <div class="settings-sheet__content">
          <section class="settings-section">
            <header class="settings-section__header">
              <span class="settings-section__icon" aria-hidden="true">ğŸ¨</span>
              <h3>GÃ¶rÃ¼nÃ¼m</h3>
            </header>
            <div class="settings-group">
              <button type="button" class="settings-accordion" data-theme-accordion>
                <span>Tema seÃ§</span>
                <span class="settings-accordion__icon" aria-hidden="true">âŒ„</span>
              </button>
              <div class="settings-accordion__panel" data-theme-options hidden></div>
            </div>
            <div class="settings-group">
              <span class="settings-label">Tesbihat Dili</span>
              <div class="language-toggle" role="group" aria-label="Tesbihat dili">
                <button type="button" class="language-toggle__option" data-language="tr">TÃ¼rkÃ§e</button>
                <button type="button" class="language-toggle__option" data-language="ar">ArapÃ§a</button>
              </div>
            </div>
          </section>
          <section class="settings-section">
            <header class="settings-section__header">
              <span class="settings-section__icon" aria-hidden="true">ğŸ¤²ğŸ¼</span>
              <h3>Dua YÃ¶netimi</h3>
            </header>
            <div class="settings-group">
              <label class="settings-label" for="dua-source">Dua kaynaÄŸÄ±</label>
              <select id="dua-source" name="dua-source"></select>
            </div>
            <div class="settings-group">
              <span class="settings-label">ArapÃ§a metinler</span>
              <button type="button" class="button-pill secondary" data-toggle-dua-arabic aria-pressed="true">
                ArapÃ§a metinleri gizle
              </button>
              <small class="settings-hint">Hadis ve Kur'an dualarÄ±ndaki ArapÃ§a metinleri dilediÄŸinizde gizleyebilirsiniz.</small>
            </div>
            <div class="settings-group" data-personal-dua-settings>
              <span class="settings-label">KiÅŸisel dua</span>
              <div class="settings-inline-actions">
                <button type="button" class="button-pill secondary" data-toggle-personal-dua aria-pressed="false">
                  KiÅŸisel duayÄ± gÃ¶ster
                </button>
                <button type="button" class="button-pill secondary" data-edit-personal-dua hidden>
                  Dua metnini dÃ¼zenle
                </button>
              </div>
              <div class="personal-dua-settings__editor" data-personal-dua-editor hidden>
                <label class="settings-label" for="personal-dua-text">KiÅŸisel dua metni</label>
                <textarea id="personal-dua-text" rows="6" data-personal-dua-text></textarea>
                <div class="settings-actions">
                  <button type="button" class="settings-action-button" data-save-personal-dua>Kaydet</button>
                  <button type="button" class="settings-action-button secondary" data-cancel-personal-dua>VazgeÃ§</button>
                </div>
              </div>
              <small class="settings-hint">Bu metin yalnÄ±zca cihazÄ±nÄ±zda saklanÄ±r ve dua kartÄ±ndaki "KiÅŸisel dua" sekmesinde gÃ¶sterilir.</small>
            </div>
            <div class="settings-actions">
              <button type="button" class="settings-action-button" data-reset-dua>
                Dua ilerlemesini sÄ±fÄ±rla
              </button>
              <small class="settings-hint">Bu iÅŸlem mevcut okuma takibini sÄ±fÄ±rlar.</small>
            </div>
            <div class="settings-actions">
              <button type="button" class="settings-action-button secondary" data-reset-dua-favorites>
                Kaydedilen dualarÄ± temizle
              </button>
              <small class="settings-hint">KaydettiÄŸiniz dualarÄ± siler.</small>
            </div>
          </section>
          <section class="settings-section" data-sync-settings>
            <header class="settings-section__header">
              <span class="settings-section__icon" aria-hidden="true">â˜ï¸</span>
              <h3>Senkronizasyon</h3>
            </header>
            <div class="settings-group">
              <span class="settings-label">Cihazlar arasÄ± veri</span>
              <div class="settings-inline-actions">
                <button type="button" class="settings-action-button" data-sync-signin>
                  Sign in to sync (Google)
                </button>
                <button type="button" class="settings-action-button secondary" data-sync-signout hidden>
                  Sign out
                </button>
              </div>
              <small class="settings-hint sync-status" data-sync-user hidden></small>
              <small class="settings-hint sync-status" data-sync-status></small>
            </div>
            <div class="settings-group" data-sync-advanced hidden>
              <span class="settings-label">GeliÅŸmiÅŸ</span>
              <div class="settings-actions">
                <button type="button" class="settings-action-button secondary" data-sync-download>
                  Re-download from cloud (overwrite this device)
                </button>
                <button type="button" class="settings-action-button" data-sync-upload>
                  Force upload this device to cloud (overwrite cloud)
                </button>
              </div>
            </div>
          </section>
          <section class="settings-section">
            <header class="settings-section__header">
              <span class="settings-section__icon" aria-hidden="true">ğŸ“Š</span>
              <h3>Tesbihat Takibi</h3>
            </header>
            <div class="settings-group">
              <small class="settings-hint">GÃ¼nlÃ¼k tamamlanma kayÄ±tlarÄ±nÄ± sÄ±fÄ±rlamak tÃ¼m geÃ§miÅŸi kalÄ±cÄ± olarak siler.</small>
              <button type="button" class="settings-action-button" data-reset-stats>Ä°statistikleri sÄ±fÄ±rla</button>
            </div>
          </section>
          <section class="settings-section">
            <header class="settings-section__header">
              <span class="settings-section__icon" aria-hidden="true">ğŸŒ™</span>
              <h3>ÃœÃ§ Aylar</h3>
            </header>
            <div class="settings-group">
              <button type="button" class="settings-action-button secondary" data-ucaylar-export>
                ÃœÃ§ Aylar verisini dÄ±ÅŸa aktar
              </button>
              <div class="settings-inline-actions">
                <button type="button" class="settings-action-button" data-ucaylar-import-trigger>
                  ÃœÃ§ Aylar verisini iÃ§e aktar
                </button>
                <input type="file" accept=".json,application/json" data-ucaylar-import-file hidden>
              </div>
              <small class="settings-hint">Ä°Ã§e aktarma mevcut ÃœÃ§ Aylar verisini silip yenisiyle deÄŸiÅŸtirir.</small>
              <small class="settings-hint" data-ucaylar-transfer-status hidden></small>
            </div>
          </section>
        </div>
      </div>
    </div>
  <!-- service worker register: staging/prod ayrÄ±mÄ± iÃ§in relative + dar scope -->
  <script>
    if ('serviceWorker' in navigator) {
      // sayfa yÃ¼klendikten sonra kaydet (ikon/manifest vs. hazÄ±r olur)
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('./service-worker.js', { scope: './' })
          .then(reg => console.log('SW scope:', reg.scope))
          .catch(err => console.error('SW register failed:', err));
      });
    }
  </script>
</body>
</html>
